<div>
    <h2>Simulateur</h2>
    <button routerLink="/">Retour Ã  l'accueil</button>

    <form [formGroup]="simulatorForm" (ngSubmit)="onSubmit()">
        {{simulatorForm.value | json}}
        <div class="form-group">
            <app-input [fGroup]="simulatorForm" [inline]="false"
                       [controlProperties]="cityProp"></app-input>
        </div>
        <div class="form-group">
            <app-input [fGroup]="simulatorForm" [inline]="false"
                       [controlProperties]="incomeProp"></app-input>
        </div>
        <div class="form-group">
            <app-input [fGroup]="simulatorForm" [inline]="false"
                       [controlProperties]="nbrHandiProp"></app-input>
        </div>
        <div class="form-group">
            <app-select [fGroup]="simulatorForm" [inline]="false"
                        [controlProperties]="nbrChildrenProp"
                        [selectItems]="numbers"></app-select>
        </div>
        <app-array-container
                [fGroup]="simulatorForm"
                [controlArray]="rowFormArray"
                [fArrayName]="childrenInfoArrayName"
                [childRowTemplate]="childRow">
        </app-array-container>

        <button [disabled]='!simulatorForm.valid' class="btn btn-primary" type="submit">Enregistrer</button>
    </form>

</div>

<ng-template #childRow let-row="row" let-i="i">
    <h4>Enfant {{i + 1}}</h4>
    <div class="row">
        <div class="col form-group">
            <app-input [fGroup]="row" [inline]="false"
                       [controlProperties]="dateOfBirthProp"></app-input>
        </div>
        <div class="col form-group">
            <app-select-scholar-level [fGroup]="row" [inline]="false"
                                      [controlProperties]="scholarLevelProp"></app-select-scholar-level>
        </div>
    </div>
</ng-template>
